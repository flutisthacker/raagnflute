<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
<script src="https://transposenotes.pages.dev/lib/splitNotes.js"></script>
<script src="https://transposenotes.pages.dev/lib/makeTable.js"></script>
<script src="https://transposenotes.pages.dev/lib/tableDisplay.js"></script>
<script src="./instrumentNotes.js"></script>
</head>
<style>
  .tbody{
    font-family: 'Preeti','Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
  }
  body{
    background-color:  #19981121;
  }
</style>
<body>
  <select name="" id="dropItems"></select>
  <input type="text" name="" id="searchTerm">
  <div class="container"></div>
    <script>
/*
abcd=[]
document.querySelectorAll(".v1Nh3.kIKUG._bz0w").forEach(ddd=>{
abcd.push(ddd.firstChild.href)
})
*/

Object.keys(noted).forEach(not=>{
  opt=document.createElement("option")
  opt.value=not
  opt.innerHTML=not
  document.querySelector("#dropItems").append(opt)
})

const containerDOM=document.querySelector('.container')
const listDOM=document.querySelector('.list')

document.querySelector("#dropItems").addEventListener("change",e=>{
  var myval=document.querySelector("#dropItems").value
  containerDOM.innerHTML=""
  updateNotes(myval)

})
document.querySelector("#searchTerm").addEventListener("keypress",e=>{
  if(e.keyCode==13){
    var myval=document.querySelector("#searchTerm").value
    updateNotes(myval)

  }
})

function updateNotes(myval){
  containerDOM.innerHTML=""
  if (containerDOM.innerHTML==""){
    containerDOM.innerHTML+="<div class='list'></div>"
    maketable(4)
    tabledisplay(changeMe(eval(`noted.${myval}`)),4)
  }
  else{
    listDOM.innerHTML+=""
    maketable(4)
    tabledisplay(changeMe(eval(`noted.${myval}`)),4)
  }
    newArr=[]

}

// notes=notea+notec
        var newArr=[]
        
function changeMe(noteArry){
  noteArry.forEach(note=>{
      if(isArray(note)==true){
          changeme(note)
      }else{
        notes=note.split("")
        intNote=""
        notes.forEach(n=>{
            intNote+=notesX[n]
          })
        newArr.push(intNote)
      }
  })
  return newArr
}

        function changeme(noteArry){
            noteArry.forEach(note=>{
              if(isArray(note)==true){
                changeme(note)
              }
              else{
                notes=note.split("")
                intNote=""
                // debugger
                notes.forEach(n=>{
                  intNote+=notesChanges.notekeyc[notesChanges.notekeya.indexOf(n)]
                })
                newArr.push(intNote)
              }
            })
          return newArr
        }

        function isArray(item){
    return Array.isArray(item);
}

</script>

<script>

const bc= new BroadcastChannel("test_channel")
bc.postMessage("this is a test message")
bc.onmessage= function(ev){console.debug(ev)}

</script>
    
</body>
</html>
